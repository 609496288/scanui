webpackJsonp([5],{112:function(t,e,i){i(614);var s=i(3)(i(615),i(620),null,null);t.exports=s.exports},614:function(t,e){},615:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(616),r=s(a),n=i(6),o=s(n),u=i(9);s(u);e.default={name:"bug-workflow",components:{splitPane:r.default},data:function(){return{flownote:"",hasSubmit:!1,bugdata:{projectid:"",projectname:"",bugid:"",bugaddr:"",bugtag:[],bugstate:"",bugreq:"",bugres:"",createdate:"",vulinfo:{vulid:"",bugrank:"",bugname:"",bugowasp:"",bugnumber:[],bugdesc:"",bugplan:""}},stepdata:[{flowid:"",flowname:"",flownote:"",updatedate:""}]}},methods:{buginfoget:function(){var t=this;o.default.ajax({method:"POST",action:"buginfoget",json:{bugid:this.$route.query.id}}).then(function(e){t.bugdata=e}).catch(function(e){t.$Message.error(e)})},stepinfoget:function(){var t=this;o.default.ajax({method:"POST",action:"stepinfoget",json:{bugid:this.$route.query.id}}).then(function(e){t.stepdata=e}).catch(function(e){t.$Message.error(e)})},stepsave:function(){var t=this;o.default.ajax({method:"POST",action:"stepsave",json:{bugid:this.$route.query.id,note:this.flownote}}).then(function(e){t.stepdata.push(e),t.$Message.info("提交成功")}).catch(function(e){t.$Message.error(e)}),this.hasSubmit=!0},bugfinish:function(){var t=this;this.stepsave(),o.default.ajax({method:"POST",action:"bugfinish",json:{selectlist:[this.$route.query.id]}}).then(function(e){t.$Message.info("确认修复！")}).catch(function(e){t.$Message.error(e)})},bugfalse:function(){var t=this;this.stepsave(),o.default.ajax({method:"POST",action:"bugfalse",json:{selectlist:[this.$route.query.id]}}).then(function(e){t.$Message.info("确认忽略！")}).catch(function(e){t.$Message.error(e)})},formatdate:function(t){return t.substring(0,19)}},created:function(){this.buginfoget(),this.stepinfoget()}}},616:function(t,e,i){i(617);var s=i(3)(i(618),i(619),null,null);t.exports=s.exports},617:function(t,e){},618:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});
//!/usr/bin/env nodejs
var s=function(t,e){return e.indexOf(t)>=0};e.default={name:"splitPane",props:{value:{type:[Number,String],default:50},direction:{type:String,default:"horizontal",validator:function(t){return s(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},right:{type:Boolean,default:!1}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,oldOffset:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?this.prefix+"-vertical":this.prefix+"-horizontal"]},leftSize:function(){return this.right?100-this.triggerOffset+"%":this.triggerOffset+"%"},rightSize:function(){return this.right?this.triggerOffset+"%":100-this.triggerOffset+"%"},triggerLeft:function(){return this.right?100-this.triggerOffset+"%":this.triggerOffset+"%"},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){return this.right?100-this.transValue(this.max):this.transValue(this.max)}},methods:{handleMouseup:function(t){this.canMove=!1,this.$emit("on-resizing-end",t)},transValue:function(t){return"number"==typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e=void 0,i=0;if("horizontal"===this.direction?(i=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)),this.right){var s=100-e;s<=this.minTransed?this.triggerOffset=100-Math.max(s,this.minTransed):this.triggerOffset=100-Math.min(s,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e<=this.minTransed,this.triggerOffset<this.oldOffset?t.direction=this.right?1:0:t.direction=this.right?0:1,this.oldOffset=this.triggerOffset,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}}},watch:{value:function(t){var e=this;this.$nextTick(function(){e.triggerOffset="number"==typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100})}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick(function(){t.triggerOffset="number"==typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100}),this.triggerOffset="number"==typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}}},619:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},["horizontal"===t.direction?i("div",{class:t.prefix+"-container"},[i("div",{class:t.prefix+"-left-area",style:{width:t.leftSize}},[t._t("left")],2),t._v(" "),t._t("trigger",[i("div",{ref:"trigger",class:t.prefix+"-trigger",style:{left:t.triggerLeft},attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})]),t._v(" "),i("div",{class:t.prefix+"-right-area",style:{width:t.rightSize}},[t._t("right")],2)],2):i("div",{class:t.prefix+"-container"},[i("div",{class:t.prefix+"-top-area",style:{height:t.leftSize}},[t._t("top")],2),t._v(" "),t._t("trigger",[i("div",{ref:"trigger",class:t.prefix+"-trigger",style:{top:t.triggerLeft},attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})]),t._v(" "),i("div",{class:t.prefix+"-bottom-area",style:{height:t.rightSize}},[t._t("bottom")],2)],2)])},staticRenderFns:[]}},620:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",[i("Col",{attrs:{lg:20}},[i("Card",[i("H1",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    ["+t._s(t.bugdata.vulinfo.vulrank)+"]"+t._s(t.bugdata.vulinfo.vulname)+" \n                ")]),t._v(" "),i("H4",[i("p",[i("Icon",{attrs:{type:"shuffle"}}),t._v(" 所属系统： "+t._s(t.bugdata.projectname))],1)]),t._v(" "),i("H4",[i("p",[i("Icon",{attrs:{type:"shuffle"}}),t._v(" 漏洞地址："+t._s(t.bugdata.bugaddr))],1)]),t._v(" "),i("div",{staticClass:"preview-con"},[i("b",{staticClass:"preview-tip"},[i("Icon",{attrs:{type:"pricetags"}}),t._v(" 漏洞编号：")],1),t._l(t.bugdata.vulinfo.vulnumber,function(e){return i("Tag",[t._v(t._s(e))])})],2),t._v(" "),i("div",[i("b",{staticClass:"preview-tip"},[i("Icon",{attrs:{type:"ios-pricetags-outline"}}),t._v(" 漏洞标签：")],1),t._l(t.bugdata.bugtag,function(e){return i("Tag",[t._v(t._s(e))])})],2),t._v(" "),i("p",{staticClass:"preview-publish-time"},[i("Icon",{attrs:{type:"android-alarm-clock"}}),t._v(" 发布时间："+t._s(t.formatdate(t.bugdata.createdate)))],1),t._v(" "),i("p",{staticClass:"preview-publish-time"},[i("Icon",{attrs:{type:"shuffle"}}),t._v(" 对应关系："+t._s(t.bugdata.vulinfo.vulowasp))],1),t._v(" "),i("div",{staticClass:"preview-content-con"},[i("H3",[t._v("漏洞描述：")]),i("div",[t._v("        "+t._s(t.bugdata.vulinfo.vuldesc))]),t._v(" "),i("H3",[t._v("修复建议：")]),i("div",[t._v("        "+t._s(t.bugdata.vulinfo.vulplan))]),t._v(" "),i("H3",[t._v("漏洞详情：")]),t._v(" "),i("div",{staticClass:"word-wrap: break-word;white-space : normal"},[i("pre",{staticStyle:{width:"100%",overflow:"hidden"},domProps:{innerHTML:t._s(t.bugdata.bugreq)}})]),t._v(" "),i("hr"),t._v(" "),i("div",[i("pre",{staticStyle:{width:"100%",overflow:"hidden"}},[t._v(t._s(t.bugdata.bugres))])])],1),t._v(" "),i("div",{staticClass:"preview-classifition-con"},[i("Row",{staticClass:"margin-left-10"},[i("Col",{staticClass:"margin-left-10",attrs:{lg:16}},[i("Input",{attrs:{type:"textarea",disabled:t.hasSubmit,placeholder:"请输入评论"},model:{value:t.flownote,callback:function(e){t.flownote=e},expression:"flownote"}})],1),t._v(" "),i("Col",{staticClass:"margin-left-10",attrs:{lg:6}},[i("Button",{attrs:{type:"success",size:"large",disabled:t.hasSubmit},on:{click:t.stepsave}},[i("Icon",{attrs:{type:"ios-download-outline"}}),t._v("\n                                发送\n                            ")],1)],1)],1),t._v(" "),i("Row")],1)],1)],1),t._v(" "),i("Col",{attrs:{lg:4}},[i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[i("Icon",{attrs:{type:"navicon-round"}}),t._v("\n                    "+t._s(t.bugdata.bugstate)+"\n                ")],1),t._v(" "),i("Timeline",[i("TimelineItem",[i("p",{staticClass:"time"},[t._v(t._s(t.formatdate(t.bugdata.createdate)))]),t._v(" "),i("div",{staticClass:"content"},[t._v(t._s(t.bugdata.createuser)+" "+t._s(t.bugdata.bugstate))])]),t._v(" "),t._l(t.stepdata,function(e){return i("TimelineItem",[i("p",{staticClass:"time"},[t._v(t._s(t.formatdate(e.updatedate)))]),t._v(" "),i("div",{staticClass:"content"},[t._v(t._s(e.flowname)+" "+t._s(e.flownote))])])})],2)],1)],1)],1)],1)},staticRenderFns:[]}}});