webpackJsonp([13],{127:function(e,t,n){var a=n(3)(n(663),n(664),null,null);e.exports=a.exports},663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={name:"user-table",data:function(){var e=this;return{current:1,total:100,modalinfo:!1,searchdata:"",modalment:!1,mentname:"",mentlist:[],userlist:[],userinfo:{uid:"",username:"",password:"",group:"",company:"",department:"",realname:"",phone:"",email:""},tabledata:[{uid:"",username:"",password:"",group:"",company:"",department:"",realname:"",phone:"",email:""}],tablehead:[{type:"selection",width:60,align:"center"},{title:"姓名",align:"center",key:"realname"},{title:"公司",key:"company",sortable:!0},{title:"部门",align:"center",key:"department"},{title:"电话",align:"center",width:120,key:"phone"},{title:"邮箱",align:"center",key:"email"},{title:"操作",align:"center",width:100,key:"action",render:function(t,n){return t("Button",{props:{type:"primary"},on:{click:function(){e.usershow(n.index,!1)}}},"编辑")}}],showCurrentTableData:!0}},methods:{mentedit:function(e){var t=this;o.default.ajax({method:"POST",action:"mentedit",json:{name:this.mentname}}).then(function(e){t.$Message.info("更新成功！"),t.modalment=!1,t.modalinfo=!0,t.userinfo.department=e.bid}).catch(function(e){t.$Message.error(e)})},mentsearch:function(e){var t=this;o.default.ajax({method:"POST",action:"mentsearch",json:{keyword:e}}).then(function(e){t.mentlist=e.ret}).catch(function(e){t.$Message.error(e)})},usershow:function(e,t){this.userinfo=t?{}:this.tabledata[e],this.modalinfo=!0},userdelete:function(){var e=this,t=this.$refs.selection.getSelection();this.userlist=[];for(var n in t)this.userlist.push(t[n].uid);o.default.ajax({method:"POST",action:"userdelete",json:{selectlist:this.userlist}}).then(function(t){e.usersearch(),e.$Message.info("删除成功！")}).catch(function(t){e.$Message.error(t)})},useredit:function(e){var t=this;o.default.ajax({method:"POST",action:"useredit",json:this.userinfo}).then(function(e){t.usersearch(),t.$Message.info("更新成功！")}).catch(function(e){t.$Message.error(e)})},usersearch:function(e){var t=this;o.default.ajax({method:"POST",action:"usersearch",json:{keyword:this.searchdata,page:e}}).then(function(e){t.tabledata=e.ret,t.total=e.total}).catch(function(e){t.$Message.error(e)})}},created:function(){this.usersearch()}}},664:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Card",[n("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){e.usershow(0,!0)}}},[n("Icon",{attrs:{type:"ios-download-outline"}}),e._v("\n                新增用户\n            ")],1),e._v(" "),n("Poptip",{attrs:{confirm:"",placement:"bottom",title:"确认删除？"},on:{"on-ok":e.userdelete}},[n("Button",{attrs:{type:"error",size:"large"}},[n("Icon",{attrs:{type:"ios-download-outline"}}),e._v("\n                删除用户\n            ")],1)],1),e._v(" "),n("Input",{staticStyle:{width:"300px"},attrs:{slot:"extra",icon:"search",placeholder:"请输入公司名或姓名进行搜索..."},on:{"on-click":e.usersearch},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.usersearch()}},slot:"extra",model:{value:e.searchdata,callback:function(t){e.searchdata=t},expression:"searchdata"}})],1),e._v(" "),n("Table",{ref:"selection",attrs:{stripe:"",border:"",size:"small",columns:e.tablehead,data:e.tabledata}}),e._v(" "),n("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[n("div",{staticStyle:{float:"left"}},[e._v("共 "+e._s(e.total)+" 条")]),e._v(" "),n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{"show-elevator":"",current:1,total:100},on:{"on-change":e.usersearch}})],1)]),e._v(" "),n("Modal",{attrs:{styles:{top:"30px"},title:"新增部门"},on:{"on-ok":e.mentedit},model:{value:e.modalment,callback:function(t){e.modalment=t},expression:"modalment"}},[n("Form",{attrs:{"label-width":80}},[n("FormItem",{attrs:{label:"名称"}},[n("Input",{attrs:{type:"text"},model:{value:e.mentname,callback:function(t){e.mentname=t},expression:"mentname"}})],1)],1)],1),e._v(" "),n("Modal",{attrs:{"z-index":"100",styles:{top:"30px"},title:"联系人员"},on:{"on-ok":e.useredit},model:{value:e.modalinfo,callback:function(t){e.modalinfo=t},expression:"modalinfo"}},[n("Form",{attrs:{model:e.userinfo,"label-width":80}},[n("FormItem",{attrs:{label:"用户名"}},[n("Input",{attrs:{type:"text"},model:{value:e.userinfo.username,callback:function(t){e.$set(e.userinfo,"username",t)},expression:"userinfo.username"}})],1),e._v(" "),n("FormItem",{attrs:{label:"用户等级"}},[n("Select",{model:{value:e.userinfo.group,callback:function(t){e.$set(e.userinfo,"group",t)},expression:"userinfo.group"}},[n("Option",{attrs:{value:"1"}},[e._v("普通用户")]),e._v(" "),n("Option",{attrs:{value:"2"}},[e._v("项目管理员")]),e._v(" "),n("Option",{attrs:{value:"3"}},[e._v("系统管理员")])],1)],1),e._v(" "),n("FormItem",{attrs:{label:"部门"}},[n("Select",{attrs:{label:e.mentname,filterable:"",remote:"","remote-method":e.mentsearch},model:{value:e.userinfo.department,callback:function(t){e.$set(e.userinfo,"department",t)},expression:"userinfo.department"}},[e._l(e.mentlist,function(t){return n("Option",{key:t.bid,attrs:{value:t.bid}},[e._v(e._s(t.name))])}),e._v(" "),n("Button",{attrs:{long:"",icon:"plus"},on:{click:function(t){e.modalinfo=!1,e.modalment=!0}}},[e._v("新增部门")])],2)],1),e._v(" "),n("FormItem",{attrs:{label:"公司"}},[n("Input",{attrs:{type:"text"},model:{value:e.userinfo.company,callback:function(t){e.$set(e.userinfo,"company",t)},expression:"userinfo.company"}})],1),e._v(" "),n("FormItem",{attrs:{label:"姓名"}},[n("Input",{attrs:{type:"text"},model:{value:e.userinfo.realname,callback:function(t){e.$set(e.userinfo,"realname",t)},expression:"userinfo.realname"}})],1),e._v(" "),n("FormItem",{attrs:{label:"电话"}},[n("Input",{attrs:{type:"text"},model:{value:e.userinfo.phone,callback:function(t){e.$set(e.userinfo,"phone",t)},expression:"userinfo.phone"}})],1),e._v(" "),n("FormItem",{attrs:{label:"邮箱"}},[n("Input",{attrs:{type:"text"},model:{value:e.userinfo.email,callback:function(t){e.$set(e.userinfo,"email",t)},expression:"userinfo.email"}})],1)],1)],1)],1)},staticRenderFns:[]}}});